VZ: MusicBrainz â€” Show All Entity Data In A Consolidated View
=============================================================

PURPOSE
-------
Consolidates paginated and non-paginated MusicBrainz table lists (Events,
Recordings, Releases, Works, Artists, Labels, Release Groups, and more) into a
single scrollable, filterable, sortable view.

SUPPORTED PAGES
---------------
â€¢ Artist:   Release Groups, Releases, Recordings, Works, Events, Aliases,
            Relationships (including filtered link_type_id pages)
â€¢ Release Group, Release, Recording, Work, Label, Series, Place, Area,
  Instrument, Event pages â€” all supported sub-tabs
â€¢ Search result pages (all entity types)

GETTING STARTED
---------------
1. Navigate to any supported MusicBrainz entity page (e.g. an Artist's
   Recordings tab).
2. Click the "Show all â€¦" action button in the controls bar to start fetching
   all pages from the MusicBrainz database.
3. A real-time progress bar (light-red â†’ orange â†’ light-green) tracks the
   fetch.  Click "Stop" at any time to abort; or press the prefix key then "o"
   while the Stop button is visible.
4. When complete, the consolidated table appears with filtering, sorting, and
   all UI features active.  The global filter is auto-focused so you can start
   typing immediately.

ACTION BUTTONS
--------------
â€¢ ğŸ’¾ Save to Disk    â€” save the current dataset as a compressed .json.gz file
                       (~60â€“80% smaller than plain JSON)
â€¢ ğŸ“‚ Load from Disk  â€” load a previously saved dataset with an optional
                       pre-filter; Alt-L inside the dialog to confirm
â€¢ â†”ï¸ Resize          â€” fit all columns to their content (toggle to restore)
â€¢ ğŸ“Š Statistics       â€” show a statistics panel (row/column counts, memory, â€¦)
â€¢ ğŸ“ Density         â€” choose Compact / Normal / Comfortable row spacing
â€¢ ğŸ‘ï¸ Visible         â€” show/hide individual table columns; Alt-S / Alt-D to
                       select/deselect all; navigate with â†‘/â†“ / Tab / Shift-Tab
â€¢ ğŸ’¾ Export          â€” export visible data as CSV, JSON, or Emacs Org-Mode
â€¢ ğŸ¹                 â€” show keyboard shortcuts reference (or press ? / /)
â€¢ âš™ï¸                 â€” open the Settings Manager to configure all options
â€¢ â“                 â€” show this help dialog

FILTERING
---------
â€¢ Global Filter â€” large input box at the top filters all columns at once
â€¢ Column Filters â€” per-column filter row below the table header
â€¢ Both support plain text, case-sensitive (Cc checkbox), regexp (Rx checkbox),
  and exclude-matches (Ex checkbox) mode â€” tick Ex to hide rows that match
  instead of keeping them
â€¢ Ctrl-G  â€” focus global filter field (configurable)
â€¢ Ctrl-C  â€” focus first column filter; repeated presses cycle through tables
            (configurable)
â€¢ Ctrl-Shift-G â€” clear all active filters (configurable)
â€¢ Escape  â€” first press clears the focused filter, second press removes focus
â€¢ ğŸ¨ Toggle highlighting â€” toggle highlight colours on/off for active filters

PRE-FILTER (Load from Disk)
---------------------------
â€¢ Enter a filter expression in the "Filter expressionâ€¦" field of the Load
  dialog before loading to import only matching rows â€” useful for large files
â€¢ Cc / Rx / Exclude Matches checkboxes apply to the pre-filter as well
â€¢ The last N expressions (configurable) are saved in a â–¼ dropdown
â€¢ Pre-filtered rows are highlighted with ğŸ¨; toggle highlighting with the
  dynamic prefilter button that appears in the filter bar

SORTING
-------
â€¢ Click any column header (â‡…) to sort ascending; click again for descending;
  click the â‡… icon again to restore original order
â€¢ Visual indicator changes to â–² / â–¼ on the active sort column
â€¢ Multi-column sort: Ctrl+Click â–² or â–¼ to add a column to the sort chain;
  superscript numbers (Â¹Â²Â³â€¦) show each column's priority; plain click returns
  to single-column mode
â€¢ Large tables use an async chunked merge-sort

COLLAPSING / EXPANDING
-----------------------
â€¢ Click an h2 header to collapse/expand its table section
â€¢ Ctrl-Click an h2 to toggle all h2 headers simultaneously (or use Ctrl-2)
â€¢ Click an h3 header to collapse/expand its type group
â€¢ Ctrl-Click an h3 to toggle all h3 headers simultaneously (or use Ctrl-3)
â€¢ Show All / Hide All links available per section

KEYBOARD SHORTCUTS  (all configurable in âš™ï¸ â†’ Keyboard Shortcuts section)
--------------------------------------------------------------------------
  ? or /           Show keyboard shortcuts reference
  Ctrl+K           Show keyboard shortcuts reference (direct, not configurable)
  Ctrl+G           Focus global filter
  Ctrl+C           Focus first column filter (cycles through tables)
  Ctrl+Shift+G     Clear all filters
  Ctrl+S           Save to Disk
  Ctrl+L           Load from Disk dialog
  Ctrl+E           Open Export menu
  Ctrl+R           Toggle Resize Columns
  Ctrl+D           Open Density menu
  Ctrl+V           Open Visible menu
  Ctrl+I           Open Statistics panel
  Ctrl+2           Toggle all h2 section headers
  Ctrl+3           Toggle all h3 type headers
  Ctrl+,           Open Settings dialog
  Escape           Clear focused filter / close open menus

PREFIX-MODE SHORTCUTS  (configurable prefix, default: Ctrl+M)
--------------------------------------------------------------
  Press the prefix key, release, then press:
    s   Save to Disk
    l   Load from Disk
    r   Toggle Resize Columns
    v   Open Visible menu
    d   Open Density menu
    t   Show Statistics panel
    e   Open Export menu
    k   Show keyboard shortcuts reference
    ,   Open Settings dialog
    h   Show App Help (this dialog)
    o   Activate Stop button (only while a fetch is running)
    1â€“9 / aâ€“z  Trigger the corresponding action button by mnemonic index

  The prefix key can be changed in âš™ï¸ Settings â†’ "ğŸ¹ KEYBOARD SHORTCUTS"
  to any combination such as "Ctrl+.", "Alt+X", "Ctrl+Shift+,".

VISIBLE MENU (keyboard navigation when open)
-----------------------------------------------------
  â†‘ / â†“ or Tab / Shift-Tab  Navigate items (checkboxes and buttons)
  Space                       Toggle focused checkbox
  Alt+S                       Select All
  Alt+D                       Deselect All
  Alt+C                       Choose current configuration (close menu)
  Enter / Escape              Close menu

DENSITY MENU (keyboard navigation when open)
--------------------------------------------
  â†‘ / â†“     Navigate options (live preview)
  Enter      Apply and close
  Escape     Close menu

EXPORT MENU (keyboard navigation when open)
-------------------------------------------
  â†‘ / â†“     Navigate formats
  Enter      Execute export and close
  Escape     Close menu

SAVE & LOAD (Offline Cache)
----------------------------
â€¢ Datasets are saved as gzip-compressed JSON (.json.gz) â€” ~60â€“80% smaller
  than plain JSON.
â€¢ When loading, enter an optional pre-filter expression (plain text, RegExp,
  or Exclude-Matches mode) to import only the rows you need.
â€¢ Load filter history (last N expressions, configurable) is accessible via the
  â–¼ dropdown in the Load dialog.
â€¢ Pre-filtered rows are highlighted with ğŸ¨; toggle highlighting with the
  dynamic prefilter button.

COLUMN MANAGEMENT
-----------------
â€¢ ğŸ‘ï¸ Visible menu â€” check/uncheck any column; Select All (Alt-S) /
  Deselect All (Alt-D); button turns red when any column is hidden
â€¢ Manual resize â€” drag column-header edges with the mouse at any time
â€¢ Resize â€” calculates optimal widths for content including images/icons;
  acts as a toggle (restores original widths on second click)
â€¢ Synthetic columns â€” some page types add computed columns alongside the raw
  data (e.g. "Country" + "Date" split from a combined "Country/Date" cell on
  release pages; "Format Types" strips quantity prefixes like "8Ã—" from the
  Format column on release-group, label, and series pages)

DENSITY CONTROL
---------------
  Compact     â€” tighter padding, smaller font, more rows visible
  Normal      â€” default MusicBrainz-like spacing
  Comfortable â€” larger padding for easier reading
  Navigate with â†‘/â†“ in the menu for an immediate live preview; Enter to apply

EXPORT
------
  CSV            â€” comma-separated, compatible with Excel / Google Sheets
  JSON           â€” structured JSON array of visible rows
  Emacs Org-Mode â€” pipe-delimited Org table format

PROGRESS BAR
------------
â€¢ The inline progress bar in the controls line transitions from light red â†’
  light orange â†’ light green as pages are fetched (0 % / 50 % / 100 %).
â€¢ The action button for the current load changes colour in sync.
â€¢ A time estimate ("est. X.Xs left") is shown inside the bar.

STATISTICS PANEL (ğŸ“Š or Ctrl+I)
--------------------------------
â€¢ Shows: sub-table count, total rows, visible rows, column count, multi-sort
  chain, estimated memory, and per-category row counts on multi-table pages.

SETTINGS (âš™ï¸ or Ctrl+,)
------------------------
All options are configurable via the Settings Manager:
â€¢ Enable / disable any UI feature (export, stats, density, column resize, â€¦)
â€¢ Configure highlight colours for pre-filter, global filter, column filters
â€¢ Set the high-page-count warning threshold
â€¢ Set the large-dataset render warning threshold
â€¢ Configure load filter history limit
â€¢ Enable collapsible sidebar (experimental)
â€¢ Optional column removal (Tagger, Rating, Relationships, Performance, â€¦)
â€¢ 12 configurable direct keyboard shortcuts (see âš™ï¸ â†’ ğŸ¹ KEYBOARD SHORTCUTS)
â€¢ Configurable prefix shortcut key (default Ctrl+M)
â€¢ Toggle the prefix-mode tooltip overlay on/off
â€¢ Full UI appearance customisation (button sizes, colours, filter input sizes)

SETTINGS DIALOG SAFETY GUARDS
------------------------------
â€¢ If you close the dialog (via the CLOSE link, Escape, or clicking outside) while
  there are unsaved changes a confirmation dialog ("Unsaved Changes") appears.
  Click OK to discard the changes, or Cancel to return to the dialog.
â€¢ Clicking RESET always opens a confirmation dialog ("Reset All Settings to Defaults")
  before any defaults are applied. Click OK to proceed, or Cancel to abort.

CHANGELOG DIALOG (ğŸ“œ ChangeLog in the Tampermonkey menu)
----------------------------------------------------------
â€¢ The changelog is loaded from GitHub (with a 1-hour GM cache) at startup.
â€¢ When you open the Changelog dialog the console shows cache-status info:
  entry count, source (ğŸ“¦ cache / ğŸŒ fresh fetch / static), and cache age.
â€¢ A "ğŸ”„ Force refresh" link in the upper-right corner (left of CLOSE) bypasses
  the cache, downloads the latest changelog from GitHub, and re-renders the table
  in place â€” without closing the dialog.
â€¢ Force-refresh success / failure is reported in the browser console and reflected
  briefly in the link label (âœ… Refreshed / âš ï¸ Refresh failed).

APPLICATION HELP DIALOG (â“ button or prefix key + H)
-------------------------------------------------------
â€¢ The help text is fetched from GitHub (with a 1-hour GM cache) when the dialog
  opens. The console reports the URL, source (ğŸ“¦ cache / ğŸŒ fresh), and byte size.
â€¢ A "ğŸ”„ Force refresh" link in the title bar (left of âœ•) downloads the latest help
  text from GitHub and re-renders the content in place.
â€¢ While a force refresh is in progress the link shows "â³ Refreshingâ€¦", then
  briefly "âœ… Refreshed" on success before returning to its default label.

SIDEBAR
-------
â€¢ The page sidebar can be optionally collapsed (experimental setting) to give
  more horizontal space to the data table.
â€¢ Sticky table headers remain visible while scrolling through large tables
  (can be disabled in Settings).

MULTI-TABLE PAGES
-----------------
â€¢ On pages like Artist-Relationships or Release-Group releases the data is
  split into independent sub-tables per category, each with its own filter,
  sort chain, clear button, and optional "Show all N" overflow expander.
â€¢ A single sub-table is auto-expanded on load.
â€¢ Ctrl+Click sort applies independently per sub-table.

PAGE RELOAD NOTICE
------------------
When MusicBrainz applies a URL filter that would interfere with pagination,
the script automatically reloads the page to strip the filter.  After reload
an âš ï¸ Page Reloaded notice appears and automatically re-clicks the "Show all"
button after 2 seconds (or immediately when you click OK / press Enter).
Press Escape on that notice to cancel the auto-action.
